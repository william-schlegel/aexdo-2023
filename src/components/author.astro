---
import { getImage } from "astro:assets";
import { getEntryBySlug } from "astro:content";

interface Props {
  author: string;
}

const { author } = Astro.props;
const auth = await getEntryBySlug("authors", author);

const image = auth?.data?.photo
  ? await getImage({
      src: auth.data.photo,
      format: "webp",
      width: 32,
      height: 32,
    })
  : null;
---

<span>
  {
    auth && (
      <span class="flex items-center gap-2">
        <p class="ml-2">par</p>
        {image ? (
          <img
            src={image.src}
            height={32}
            width={32}
            class="aspect-square rounded-full"
            alt={auth.data.nom}
          />
        ) : null}
        {auth.data.nom}
      </span>
    )
  }
</span>
